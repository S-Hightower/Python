from flask_app.config.mysqlconnection import connectToMySQL
from flask import flash
from flask_bcrypt import Bcrypt
from flask_app import app
import re

DATABASE='recipes'
#instantiate bcrypt class
bcrypt = Bcrypt(app)

@app.route('/dashboard')
def recipes():
    recipes = model_recipe.Recipe.get_all()
    return render_template("index.html", all_recipes = recipes)

# action route
@app.route('/create/recipe', methods=['POST'])
def add_recipe():
    id = model_recipe.Recipe.add_recipe(request.form)
    return redirect('/dashboard')

@app.route('/recipe/<int:id>')
def show_recipe(id):
    data = model_recipe.Recipe.get_one_with_users({'id': id})
    return render_template('dashboard.html', recipe=data)